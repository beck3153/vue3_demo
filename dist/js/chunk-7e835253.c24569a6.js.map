{"version":3,"sources":["webpack:///./src/components/Pagination.vue","webpack:///./src/components/Pagination.vue?2044","webpack:///./src/views/Products.vue","webpack:///./src/components/ProductModel.vue","webpack:///./src/components/ProductModel.vue?8d9e","webpack:///./src/views/Products.vue?b2a7"],"names":["aria-label","class","_createElementVNode","aria-hidden","_hoisted_3","_hoisted_6","_createElementBlock","$props","has_pre","href","onClick","$options","current_page","_Fragment","_renderList","total_pages","page","key","_hoisted_5","has_next","props","methods","updatePage","this","$emit","__exports__","render","width","colspan","_createVNode","_component_Loading","active","$data","type","item","id","_toDisplayString","category","src","imageUrl","alt","title","_ctx","currency","origin_price","price","is_enabled","_hoisted_11","_hoisted_12","_component_pagination","ref","pages","onEmitPages","_component_productModel","product","onUpdateProduct","_component_delModel","onDelItem","tabindex","aria-labelledby","data-bs-dismiss","for","_hoisted_4","_hoisted_9","placeholder","$event","onChange","images","splice","_hoisted_15","push","_hoisted_18","_hoisted_21","_hoisted_23","unit","_hoisted_26","_hoisted_28","_hoisted_29","_hoisted_31","description","_hoisted_33","content","true-value","false-value","_hoisted_36","_hoisted_38","Object","default","watch","tempProduct","data","modal","uploadFile","$refs","fileInput","files","formData","FormData","append","url","$http","post","then","res","success","mixins","modalMixin","products","pagination","isNew","isLoading","components","productModel","delModel","inject","getProducts","api","get","console","log","openModal","productComponent","showModal","updateProduct","httpMethod","response","hideModal","emitter","emit","style","message","join","openDelModal","delComponent","delProduct","delete","created"],"mappings":"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","file":"js/chunk-7e835253.c24569a6.js","sourcesContent":["<template>\n  <nav aria-label=\"Page navigation example\">\n    <ul class=\"pagination justify-content-center\">\n      <li class=\"page-item\" :class=\"{ 'disabled' : !pages.has_pre }\">\n        <a class=\"page-link\" href=\"#\" aria-label=\"Previous\"\n         @click.prevent=\"updatePage(`${pages.current_page - 1}`)\">\n          <span aria-hidden=\"true\">&laquo;</span>\n        </a>\n      </li>\n      <li class=\"page-item\" v-for=\"page in pages.total_pages\" :key=\"page\"\n       :class=\"{ 'active' : page === pages.current_page }\">\n        <a class=\"page-link\" href=\"#\" @click.prevent=\"updatePage(page)\">{{ page }}</a>\n      </li>\n      <li class=\"page-item\" :class=\"{ 'disabled' : !pages.has_next }\">\n        <a class=\"page-link\" href=\"#\" aria-label=\"Next\"\n         @click.prevent=\"updatePage(`${pages.current_page + 1}`)\">\n          <span aria-hidden=\"true\">&raquo;</span>\n        </a>\n      </li>\n    </ul>\n  </nav>\n</template>\n\n<script>\n// :pages=\"{ 頁碼資訊 }\"\n// @emitPages=\"更新頁面事件\"\nexport default {\n  props: ['pages'],\n  methods: {\n    updatePage(page) {\n      this.$emit('emit-pages', page);\n    },\n  },\n};\n</script>\n","import { render } from \"./Pagination.vue?vue&type=template&id=c27b9f92\"\nimport script from \"./Pagination.vue?vue&type=script&lang=js\"\nexport * from \"./Pagination.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\工作用資料夾資料\\\\vue_temp\\\\prog_airbnb\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <Loading :active=\"isLoading\"></Loading>\n    <div class=\"text-end\">\n      <button class=\"btn btn-primary\"\n       type=\"button\"\n       @click=\"openModal(true)\">\n        新增商品\n      </button>\n    </div>\n    <table class=\"table mt-4\">\n  <thead>\n    <tr>\n      <th width=\"120\">分類</th>\n      <th colspan=\"2\">產品名稱</th>\n      <th width=\"120\">原價</th>\n      <th width=\"120\">售價</th>\n      <th width=\"100\">是否啟用</th>\n      <th width=\"200\">編輯</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr v-for=\"item in products\" :key=\"item.id\">\n      <td>{{item.category}}</td>\n      <td width=\"150\"><img class=\"img-fluid\" :src=\"item.imageUrl\" :alt=\"item.title\"></td>\n      <td>{{item.title}}</td>\n      <td class=\"text-right\">\n        {{ $filters.currency(item.origin_price) }}\n      </td>\n      <td class=\"text-right\">\n        {{ $filters.currency(item.price) }}\n      </td>\n      <td>\n        <span class=\"text-success\" v-if=\"item.is_enabled\">啟用</span>\n        <span class=\"text-muted\" v-else>未啟用</span>\n      </td>\n      <td>\n        <div class=\"btn-group\">\n          <button class=\"btn btn-outline-primary btn-sm\"\n           @click=\"openModal(false, item)\">編輯</button>\n          <button class=\"btn btn-outline-danger btn-sm\"\n           @click=\"openDelModal(item)\">刪除</button>\n        </div>\n      </td>\n    </tr>\n  </tbody>\n</table>\n<pagination ref=\"pagination\"\n :pages=\"pagination\"\n @emit-pages=\"getProducts\"></pagination>\n<productModel ref=\"productModel\"\n :product=\"tempProduct\"\n @update-product=\"updateProduct\"></productModel>\n<delModel ref=\"delModel\"\n :item=\"tempProduct\"\n @del-item=\"delProduct\"></delModel>\n</template>\n\n<script>\nimport productModel from '../components/ProductModel.vue';\nimport delModel from '../components/DelModel.vue';\nimport pagination from '../components/Pagination.vue';\n\nexport default {\n  data() {\n    return {\n      products: [],\n      pagination: {},\n      tempProduct: {},\n      isNew: false,\n      isLoading: false,\n    };\n  },\n  components: {\n    productModel,\n    delModel,\n    pagination,\n  },\n  inject: ['emitter'],\n  methods: {\n    getProducts(page = 1) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products?page=${page}`;\n      this.isLoading = true;\n      this.$http.get(api).then((res) => {\n        this.isLoading = false;\n        if (res.data.success) {\n          console.log(res.data);\n          this.products = res.data.products;\n          this.pagination = res.data.pagination;\n        }\n      });\n    },\n    openModal(isNew, item) {\n      if (isNew) {\n        this.tempProduct = {};\n      } else {\n        this.tempProduct = { ...item };\n      }\n      this.isNew = isNew;\n      const productComponent = this.$refs.productModel;\n      productComponent.showModal();\n    },\n    updateProduct(item) {\n      this.tempProduct = item;\n      // add product\n      let api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product`;\n      let httpMethod = 'post';\n\n      if (!this.isNew) {\n        // edit product\n        api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${item.id}`;\n        httpMethod = 'put';\n      }\n      const productComponent = this.$refs.productModel;\n      this.isLoading = true;\n      this.$http[httpMethod](api, { data: this.tempProduct })\n        .then((response) => {\n          this.isLoading = false;\n          console.log(response);\n          if (response.data.success) {\n            productComponent.hideModal();\n            this.emitter.emit('push-message', {\n              style: 'success',\n              title: '更新成功',\n            });\n          } else {\n            this.emitter.emit('push-message', {\n              style: 'danger',\n              title: '更新失敗',\n              content: response.data.message.join('、'),\n            });\n          }\n          this.getProducts();\n        });\n    },\n    openDelModal(item) {\n      this.tempProduct = { ...item };\n      const delComponent = this.$refs.delModel;\n      delComponent.showModal();\n    },\n    delProduct() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${this.tempProduct.id}`;\n      this.isLoading = true;\n      this.$http.delete(url).then((response) => {\n        this.isLoading = false;\n        console.log(response.data);\n        const delComponent = this.$refs.delModel;\n        delComponent.hideModal();\n        this.getProducts();\n      });\n    },\n  },\n  created() {\n    this.getProducts();\n  },\n};\n</script>\n","<template>\n<Loading :active=\"isLoading\"></Loading>\n<div class=\"modal fade\" id=\"exampleModal\"\ntabindex=\"-1\"\naria-labelledby=\"exampleModalLabel\"\naria-hidden=\"true\"\nref=\"modal\">\n  <div class=\"modal-dialog modal-xl\">\n    <div class=\"modal-content border-0\">\n      <div class=\"modal-header bg-dark text-white\">\n        <h5 class=\"modal-title\" id=\"exampleModalLabel\">新增商品</h5>\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n      </div>\n      <div class=\"modal-body\">\n        <div class=\"row\">\n          <div class=\"col-sm-4\">\n            <div class=\"mb-3\">\n              <label for=\"image\" class=\"form-label\">輸入圖片網址</label>\n              <input type=\"text\" class=\"form-control\" id=\"image\"\n                      placeholder=\"請輸入圖片連結\"\n                      v-model=\"tempProduct.imageUrl\">\n            </div>\n            <div class=\"mb-3\">\n              <label for=\"customFile\" class=\"form-label\">或 上傳圖片\n                <i class=\"fas fa-spinner fa-spin\"></i>\n              </label>\n              <input\n               type=\"file\"\n               id=\"customFile\"\n               class=\"form-control\"\n               ref=\"fileInput\"\n               @change=\"uploadFile\"\n               />\n            </div>\n            <img class=\"img-fluid\" :src=\"tempProduct.imageUrl\" alt=\"\">\n            <!-- 延伸技巧，多圖 -->\n            <div class=\"mt-5\" v-if=\"tempProduct.images\">\n              <div v-for=\"(item, key) in tempProduct.images\"\n               class=\"mb-3 input-group\" :key=\"key\">\n                <input type=\"url\" class=\"form-control form-control\"\n                v-model=\"tempProduct.images[key]\"\n                        placeholder=\"請輸入連結\">\n                <button type=\"button\" class=\"btn btn-outline-danger\"\n                 @click=\"tempProduct.images.splice(key, 1)\">\n                  移除\n                </button>\n              </div>\n              <div>\n                <button type=\"button\"\n                 class=\"btn btn-outline-primary btn-sm d-block w-100\"\n                  @click=\"tempProduct.images.push('')\">\n                  新增圖片\n                </button>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-sm-8\">\n            <div class=\"mb-3\">\n              <label for=\"title\" class=\"form-label\">\n                <span class=\"text-danger\">*</span>標題</label>\n              <input type=\"text\" class=\"form-control\" id=\"title\"\n                      placeholder=\"請輸入標題\"\n                      v-model=\"tempProduct.title\">\n            </div>\n\n            <div class=\"row gx-2\">\n              <div class=\"mb-3 col-md-6\">\n                <label for=\"category\" class=\"form-label\">\n                  <span class=\"text-danger\">*</span>分類</label>\n                <input type=\"text\" class=\"form-control\" id=\"category\"\n                        placeholder=\"請輸入分類\"\n                        v-model=\"tempProduct.category\">\n              </div>\n              <div class=\"mb-3 col-md-6\">\n                <label for=\"price\" class=\"form-label\">\n                  <span class=\"text-danger\">*</span>單位</label>\n                <input type=\"text\" class=\"form-control\" id=\"unit\"\n                        placeholder=\"請輸入單位\"\n                        v-model=\"tempProduct.unit\">\n              </div>\n            </div>\n\n            <div class=\"row gx-2\">\n              <div class=\"mb-3 col-md-6\">\n                <label for=\"origin_price\" class=\"form-label\">\n                  <span class=\"text-danger\">*</span>原價</label>\n                <input type=\"number\" class=\"form-control\" id=\"origin_price\"\n                        placeholder=\"請輸入原價\"\n                        v-model=\"tempProduct.origin_price\">\n              </div>\n              <div class=\"mb-3 col-md-6\">\n                <label for=\"price\" class=\"form-label\">\n                  <span class=\"text-danger\">*</span>售價</label>\n                <input type=\"number\" class=\"form-control\" id=\"price\"\n                        placeholder=\"請輸入售價\"\n                        v-model=\"tempProduct.price\">\n              </div>\n            </div>\n            <hr>\n\n            <div class=\"mb-3\">\n              <label for=\"description\" class=\"form-label\">產品描述</label>\n              <textarea type=\"text\" class=\"form-control\" id=\"description\"\n                        placeholder=\"請輸入產品描述\" v-model=\"tempProduct.description\"></textarea>\n            </div>\n            <div class=\"mb-3\">\n              <label for=\"content\" class=\"form-label\">說明內容</label>\n              <textarea type=\"text\" class=\"form-control\" id=\"content\"\n                        placeholder=\"請輸入產品說明內容\" v-model=\"tempProduct.content\"></textarea>\n            </div>\n            <div class=\"mb-3\">\n              <div class=\"form-check\">\n                <input class=\"form-check-input\" type=\"checkbox\"\n                         v-model=\"tempProduct.is_enabled\"\n                        :true-value=\"1\"\n                        :false-value=\"0\"\n                        id=\"is_enabled\">\n                <label class=\"form-check-label\" for=\"is_enabled\">\n                  是否啟用\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">關閉</button>\n        <button type=\"button\" class=\"btn btn-primary\"\n        @click=\"$emit('update-product', tempProduct)\">儲存</button>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport modalMixin from '@/mixins/modalMixins';\n\nexport default {\n  props: {\n    product: {\n      type: Object,\n      default() { return {}; },\n    },\n  },\n  watch: {\n    product() {\n      this.tempProduct = this.product;\n    },\n  },\n  data() {\n    return {\n      modal: {},\n      tempProduct: {},\n    };\n  },\n  methods: {\n    uploadFile() {\n      const uploadFile = this.$refs.fileInput.files[0];\n      const formData = new FormData();\n      formData.append('file-to-upload', uploadFile);\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/upload`;\n      this.$http.post(url, formData).then((res) => {\n        if (res.data.success) {\n          this.tempProduct.imageUrl = res.data.imageUrl;\n        }\n      });\n    },\n  },\n  mixins: [modalMixin],\n};\n</script>\n","import { render } from \"./ProductModel.vue?vue&type=template&id=013861e2\"\nimport script from \"./ProductModel.vue?vue&type=script&lang=js\"\nexport * from \"./ProductModel.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\工作用資料夾資料\\\\vue_temp\\\\prog_airbnb\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Products.vue?vue&type=template&id=f7de17e8\"\nimport script from \"./Products.vue?vue&type=script&lang=js\"\nexport * from \"./Products.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\工作用資料夾資料\\\\vue_temp\\\\prog_airbnb\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}